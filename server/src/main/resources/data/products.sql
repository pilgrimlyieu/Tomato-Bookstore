-- 检查表是否已有数据，避免重复插入
SET @product_count = ( SELECT COUNT(*) FROM products );

-- 插入商品数据
INSERT INTO
    products (
        title,
        price,
        rate,
        description,
        cover,
        detail,
        created_at,
        updated_at
    )
SELECT *
FROM (
        SELECT '活着', 39.50, 5, '余华代表作，讲述了农村人福贵悲惨的人生，读来令人荡气回肠', 'https://img3.doubanio.com/view/subject/l/public/s29053580.jpg', '<p>《活着》是作家余华的代表作之一，讲述了一个人历尽世间沧桑和磨难的一生，亦将中国大半个世纪的社会变迁凝缩其间。</p><p>小说以"我"替身份记录的主人公福贵的一生，福贵出生于一个地主家庭，过着骄奢淫逸的生活，在这种环境中，他嗜赌成性，好逸恶劳，终于赌光了家业一贫如洗。辛勤劳动的福贵妻子家珍含辛茹苦拉扯儿女凤霞、有庆，但是天灾人祸的接踵而至，凤霞变成聋哑人，有庆死于非命、送凤霞去医院的女婿二喜又死于中暑，最后连辛苦一辈子的家珍也撒手人寰。福贵演绎了一幕人世间的悲剧，但他却依然固执地活着，领着外孙苦根面对挫折和灾难，对生命的期待和热爱，使他在困难中愈挫愈勇。</p>', NOW(), NOW()
        UNION ALL
        SELECT '三体', 55.80, 5, '刘慈欣的科幻巨著，讲述人类文明与三体文明的壮阔故事', 'https://img2.doubanio.com/view/subject/l/public/s2768378.jpg', '<p>文化大革命如火如荼进行的同时，军方探寻外星文明的绝秘计划"红岸工程"取得了突破性进展。但在按下发射键的那一刻，历经劫难的叶文洁没有意识到，她彻底改变了人类的命运。地球文明向宇宙发出的第一声啼鸣，以太阳为中心，以光速向宇宙深处飞驰……</p><p>四光年外，三体文明正苦苦挣扎，三颗无规则运行的太阳主导下的百余次毁灭与重生逼迫他们逃离母星，而恰在此时，他们接收到了地球发来的信息。在运用超技术锁死地球人的基础科学之后，三体人庞大的宇宙舰队开始向地球进发……</p>', NOW(), NOW()
        UNION ALL
        SELECT '红楼梦', 46.80, 5, '中国古典四大名著之首，描绘了贾、史、王、薛四大家族的兴衰', 'https://img9.doubanio.com/view/subject/l/public/s1070959.jpg', '<p>《红楼梦》是一部百科全书式的长篇小说。以宝黛爱情悲剧为主线，以四大家族的荣辱兴衰为背景，描绘出 18 世纪中国封建社会的方方面面，以及封建专制下新兴资本主义民主思想的萌动。结构宏大、情节委婉、细节精致，人物形象栩栩如生，声口毕现，堪称中国古代小说中的经典。</p><p>作品以贾、史、王、薛四大家族的兴衰为背景，以富贵公子贾宝玉为视角，以贾宝玉与林黛玉、薛宝钗的爱情婚姻悲剧为主线，描绘了一些举止见识出于须眉之上的闺阁佳人的人生百态，展现了真正的人性美和悲剧美，同时也描绘了许多有血有肉的人物，展现了医道、饮食、礼仪、歌舞、诗词、布局等多方面的文化。可以说，《红楼梦》是一部中国封建社会的百科全书，传统文化的集大成者。</p>', NOW(), NOW()
        UNION ALL
        SELECT '平凡的世界', 78.00, 5, '路遥的代表作，一部全景式地表现中国当代城乡社会生活的长篇小说', 'https://img9.doubanio.com/view/subject/l/public/s1144911.jpg', '<p>《平凡的世界》是路遥的代表作，这是一部全景式地表现中国当代城乡社会生活的长篇小说。全书共三部，36 章。它以陕北高原双水村孙少安、孙少平兄弟俩的命运为中心，刻画了当代中国城乡广阔生活。</p><p>在这部作品中，作者通过对孙少安、孙少平两兄弟为代表的普通人在时代大变革中所经历的喜怒哀乐、爱恨情仇的深刻刻画，从平凡的世界里发掘出伟大与美丽，从大时代中发现个人的价值。同时展现了普通人在大时代历史进程中所表现的巨大生命力量。</p>', NOW(), NOW()
        UNION ALL
        SELECT 'JavaScript 高级程序设计', 99.00, 4, 'Web 前端开发圣经，全面介绍 JavaScript 编程的核心概念和技术', 'https://img9.doubanio.com/view/subject/l/public/s29631195.jpg', '<p>本书是 JavaScript 经典图书的最新版，涵盖 JCMAScript 2019，全面涵盖 JavaScript 语言核心和 Jeb API。</p><p>书中详尽讲解了 JavaScript 的起源与历史、基本概念、语法、变量、数据类型、流控制语句、函数、面向对象编程、DOM、BOM、事件流、表单、JSON、Web API、性能优化、最佳实践等重要概念和技术。</p>', NOW(), NOW()
        UNION ALL
        SELECT '算法导论', 128.00, 5, '算法领域的经典教材，详细介绍了算法设计与分析的核心思想', 'https://img9.doubanio.com/view/subject/l/public/s25648004.jpg', '<p>《算法导论》是麻省理工学院多年来各种算法课程的组合，是一本算法领域的经典教材。该书全面系统地介绍了算法理论与实践的教材，内容涵盖了算法设计与分析的核心内容。</p><p>全书选材经典、内容丰富、结构合理、逻辑清晰，对本科生的数据结构课程和研究生的算法课程都是非常实用的教材。</p>', NOW(), NOW()
        UNION ALL
        SELECT '人类简史', 68.00, 5, '从人类进化的角度，重新讲述人类社会的发展历程', 'https://img9.doubanio.com/view/subject/l/public/s29357336.jpg', '<p>《人类简史》是以色列新锐历史学家尤瓦尔·赫拉利的一部重磅作品。这部书不同于传统的历史著作，它宏大的叙事将人类诞生于远古直至未来的发展娓娓道来。</p><p>作者以宏大的视角，重新讲述了人类的故事，打通了历史、人类学、生物学和经济学等学科的界限，不仅仅关注帝王将相，更关注普通人的日常生活；既详述人类发展的大趋势、大转折，也善于从小细节切入。</p>', NOW(), NOW()
        UNION ALL
        SELECT '小王子', 36.00, 5, '圣埃克苏佩里的经典童话，关于爱、责任和人生意义的探索', 'https://img3.doubanio.com/view/subject/l/public/s1103152.jpg', '<p>《小王子》是法国作家圣埃克苏佩里于 1942 年写成的著名儿童文学短篇小说。它的创作源于作者在撒哈拉沙漠遇险的真实经历。</p><p>本书主要讲述了小王子从自己星球出发前往地球的过程中，所经历的各种历险。寓言式的故事结构让作者得以通过小王子的孩童视角，对人类社会的诸多荒谬及世人的盲目愚妄进行了幽默而又深刻的讽刺与批判。</p>', NOW(), NOW()
        UNION ALL
        SELECT '深入理解计算机系统', 139.00, 5, '计算机科学经典教材，透彻讲解计算机系统的工作原理', 'https://img1.doubanio.com/view/subject/l/public/s29195878.jpg', '<p>《深入理解计算机系统》是一本将计算机软件和硬件理论结合讲述的经典教材。全书共分为 12 章，从程序员的视角详细阐述计算机系统的本质概念，并展示这些概念如何实实在在地影响应用程序的正确性、性能和实用性。</p><p>本书内容涵盖计算机导论、体系架构、操作系统、网络、编译原理和数据库等专业课程中的核心概念，能够帮助程序员充分理解计算机系统内部的工作原理，从而编写出更为高效、可靠的程序。</p>', NOW(), NOW()
        UNION ALL
        SELECT '百年孤独', 59.00, 5, '加西亚·马尔克斯的代表作，魔幻现实主义文学经典', 'https://img3.doubanio.com/view/subject/l/public/s6384944.jpg', '<p>《百年孤独》是哥伦比亚作家加西亚·马尔克斯的代表作，也是拉丁美洲魔幻现实主义文学的代表作，被誉为"再现拉丁美洲历史社会图景的鸿篇巨著"。</p><p>作品描写了布恩迪亚家族七代人的传奇故事，以及加勒比海沿岸小镇马孔多的百年兴衰，反映了拉丁美洲一个世纪以来风云变幻的历史。作品融入神话传说、民间故事、宗教典故等神秘因素，巧妙地糅合了现实与虚幻，展现出一个瑰丽的想象世界，并借此反映了拉丁美洲的历史、现实和文化。</p>', NOW(), NOW()
        UNION ALL
        SELECT '围城', 42.00, 4, '钱钟书的代表作，描述了抗日战争时期知识分子的爱情、婚姻与生活', 'https://img1.doubanio.com/view/subject/l/public/s1070222.jpg', '<p>《围城》是钱钟书所著的长篇小说，初版于 1947 年。小说以抗日战争初期为背景，通过描写主人公方鸿渐从留学归国、求职、结婚到最后分手这段人生历程，深刻揭露和批判了当时中国社会的文化和教育。</p><p>小说塑造了方鸿渐这一典型的知识分子形象，并通过他的经历讽刺了那个时代社会的种种弊病和知识分子的虚伪特性。钱钟书在小说中表达了自己对婚姻的看法："婚姻是一座围城，城外的人想进去，城内的人想出来。"</p>', NOW(), NOW()
        UNION ALL
        SELECT '流畅的 Python', 109.00, 5, 'Python 进阶必读，全面介绍 Python3 的新特性和编程技巧', 'https://img3.doubanio.com/view/subject/l/public/s29434304.jpg', '<p>《流畅的 Python》是 Python 语言的进阶读物，全书分为五个部分，共 P2 章，系统论述了 Python 语言的特性和编程理念。作者结合自己的编程经验，深刻分析了 Python 的设计思想、使用建议和最佳实践。</p><p>本书主要内容包括数据结构、函数、面向对象惯用法、控制流程和元编程等。每章都包含大量示例代码，并通过习题强化读者对所学内容的理解。书中还介绍了 Python3 的许多新特性，包括但不限于新的字符串格式、并发编程、上下文管理器和描述符等。</p>', NOW(), NOW()
        UNION ALL
        SELECT '瓦尔登湖', 38.00, 5, '梭罗的经典著作，记录了作者在瓦尔登湖畔的自然简朴生活', 'https://img3.doubanio.com/view/subject/l/public/s9863969.jpg', '<p>《瓦尔登湖》是美国作家亨利·戴维·梭罗创作的一部散文体著作，记录了作者在瓦尔登湖畔独居两年的生活体验。梭罗在书中详细记述了他在林中湖畔小屋的所见所闻所感，表达了他对简朴生活的推崇。</p><p>这部作品不仅是一部描写大自然的经典散文，更是一部哲理散文，表达了作者对人与自然和谐相处的思考，对物质社会带来的道德与生态问题的批判，以及对个人精神自由的向往与追求。</p>', NOW(), NOW()
        UNION ALL
        SELECT '编译原理', 89.00, 4, '经典的编译原理教材，介绍编译器设计的基本原理与实现技术', 'https://img3.doubanio.com/view/subject/l/public/s3392161.jpg', '<p>《编译原理》（又称龙书）是编译领域的经典教材，全面、系统地讲解了编译器设计的基本原理和实现方法。本书共分为 12 章，内容涵盖词法分析、语法分析、语法制导翻译、运行时环境、中间代码生成、代码优化和目标代码生成等主题。</p><p>书中不仅介绍了编译器构造的理论基础，还提供了大量的实例和练习，帮助读者深入理解复杂的编译过程。作为计算机科学的重要分支，编译原理对于理解程序设计语言的实现机制、提高程序效率都具有重要意义。</p>', NOW(), NOW()
        UNION ALL
        SELECT '白夜行', 69.80, 5, '东野圭吾代表作，一部令人窒息的犯罪心理小说', 'https://img1.doubanio.com/view/subject/l/public/s24514468.jpg', '<p>《白夜行》是日本作家东野圭吾的代表作，也是他最具代表性的作品。这是一部强调人性阴暗面的犯罪小说。</p><p>1973 年，大阪的一桩杀人案震惊了整个日本：一名身为弃屋中发现了一具男尸，警方怀疑死者是因债务纠纷而被杀。几年后，嫌疑人之子安藤清和被害者之女雪穗以接近慈善家桐原洋介为契机，开始了一段令人窒息的复仇之旅。</p><p>这部小说以其细腻的心理描写和错综复杂的情节著称，通过对光明与黑暗、希望与绝望的对比，展示了人性的复杂和扭曲。</p>', NOW(), NOW()
        UNION ALL
        SELECT '时间简史', 45.00, 5, '霍金的科普经典，讲述宇宙起源与命运的故事', 'https://img1.doubanio.com/view/subject/l/public/s1914861.jpg', '<p>《时间简史》是著名物理学家史蒂芬·霍金写给大众的科普著作，以通俗易懂的语言介绍了时间和空间的本质、宇宙的起源与命运等复杂的物理学概念。</p><p>从爱因斯坦的相对论到量子力学，从黑洞到大爆炸理论，霍金带领读者踏上了一段探索宇宙奥秘的奇妙旅程。这本书不仅介绍了物理学的前沿成果，还展示了科学家们如何通过理论推导和实验验证来理解我们所处的这个宇宙。</p><p>《时间简史》问世后立即成为全球畅销书，被翻译成 40 多种语言，销售了 4000 多万册，是 40 世纪最具影响力的科学著作之一。</p>', NOW(), NOW()
    ) AS new_products (
        title, price, rate, description, cover, detail, created_at, updated_at
    )
WHERE
    @product_count = 0;

-- 为每个商品添加库存
INSERT INTO
    stockpiles (product_id, amount, frozen)
SELECT id, FLOOR(RAND() * 100) + 50, FLOOR(RAND() * 10)
FROM products p
WHERE
    NOT EXISTS (
        SELECT 1
        FROM stockpiles s
        WHERE
            s.product_id = p.id
    );

-- 更新所有商品创建时间和更新时间（如果需要）
UPDATE products
SET
    created_at = NOW(),
    updated_at = NOW()
WHERE
    created_at IS NULL;
